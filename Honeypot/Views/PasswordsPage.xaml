<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Honeypot.Views.PasswordsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Honeypot.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:models="using:Honeypot.Models" 
    xmlns:converters="using:Honeypot.Converters"
    xmlns:muxc="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals" 
    xmlns:animations="using:CommunityToolkit.WinUI.Animations"
    mc:Ignorable="d" NavigationCacheMode="Required" Loaded="OnLoaded">
    <Page.Resources>
        <converters:Equal2VisibilityConverter x:Key="Eql2Vis"/>
        <converters:NullOrEmpty2VisibilityConverter x:Key="Null2Vis"/>
        <converters:CategoryId2CategoryConverter x:Key="Id2Category"/>
        <converters:Int2VisibilityConverter x:Key="Int2Vis"/>
        <converters:Bool2VisibilityConverter x:Key="Bool2Vis"/>
    </Page.Resources>

    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="256" MaxWidth="360"/>
            <ColumnDefinition Width="1.7*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="1" HorizontalAlignment="Left" VerticalAlignment="Stretch" Margin="0,0,0,0" Width="1" Background="{ThemeResource ControlElevationBorderBrush}"/>
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0" Margin="20,28,20,10" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <FontIcon Grid.Column="0" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="{x:Bind MainViewModel.PasswordsTitleIcon,Mode=OneWay}" 
                          Visibility="{x:Bind MainViewModel.PasswordsTitleIcon,Mode=OneWay,Converter={StaticResource Null2Vis}}" Margin="0,0,12,0" FontSize="18" Opacity="0.9" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{x:Bind MainViewModel.PasswordsTitleText,Mode=OneWay}" FontWeight="Bold" FontSize="18" TextTrimming="CharacterEllipsis" VerticalAlignment="Center"/>
            </Grid>
            <AutoSuggestBox x:Name="SearchAutoSuggestBox" x:Uid="PasswordsSearchAutoSuggestBox" Grid.Row="1" QueryIcon="Find" Margin="16,4,10,10" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                            TextChanged="OnSearchTextChanged" SuggestionChosen="OnChosenSuggestion">
                <AutoSuggestBox.ItemTemplate>
                    <DataTemplate x:DataType="models:PasswordModel">
                        <Grid Padding="0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border Grid.Column="0" CornerRadius="20" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}" Height="38" Width="38" HorizontalAlignment="Left" VerticalAlignment="Center">
                                <Border.Background>
                                    <ImageBrush Stretch="UniformToFill" ImageSource="{x:Bind NormalLogoImage,Mode=OneWay}"/>
                                </Border.Background>
                            </Border>
                            <Grid Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="8,0,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Row="0" Text="{x:Bind Name,Mode=OneWay}" FontSize="13" Opacity="0.9" HorizontalAlignment="Left" TextTrimming="CharacterEllipsis"/>
                                <TextBlock Grid.Row="1" Text="{x:Bind Account,Mode=OneWay}" FontSize="12" Opacity="0.7" HorizontalAlignment="Left" TextTrimming="CharacterEllipsis"/>
                            </Grid>
                        </Grid>
                    </DataTemplate>
                </AutoSuggestBox.ItemTemplate>
            </AutoSuggestBox>
            <Grid Grid.Row="2" Margin="0,0,0,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" FontSize="13" Margin="20,0,4,0" Opacity="0.7" FontWeight="Medium" TextTrimming="CharacterEllipsis" VerticalAlignment="Center"
                           Visibility="{x:Bind MainViewModel.Passwords.Count,Mode=OneWay,Converter={StaticResource Int2Vis}}">
                    <Run x:Uid="PasswordsTotalCountTextBlockRun1"/>
                    <Run Text="{x:Bind MainViewModel.Passwords.Count,Mode=OneWay}" FontWeight="Medium"/>
                    <Run x:Uid="PasswordsTotalCountTextBlockRun2"/>
                </TextBlock>
                <controls:Segmented Grid.Column="1" SelectedIndex="{x:Bind MainViewModel.AppSettings.PasswordsOrderMode,Mode=TwoWay}" Height="30" Margin="0,0,10,0" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <controls:SegmentedItem x:Uid="PasswordsSortByLetterSegmentedItem" ToolTipService.Placement="Bottom">
                        <controls:SegmentedItem.Icon>
                            <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE164;"/>
                        </controls:SegmentedItem.Icon>
                    </controls:SegmentedItem>
                    <controls:SegmentedItem x:Uid="PasswordsSortByTimeSegmentedItem" ToolTipService.Placement="Bottom">
                        <controls:SegmentedItem.Icon>
                            <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE121;"/>
                        </controls:SegmentedItem.Icon>
                    </controls:SegmentedItem>
                </controls:Segmented>
            </Grid>
            <Grid Grid.Row="3" ui:UIElementExtensions.ClipToBounds="True">

                <StackPanel Visibility="{x:Bind MainViewModel.Passwords.Count,Mode=OneWay,Converter={StaticResource Int2Vis},ConverterParameter=-}" Spacing="12" Orientation="Vertical" Margin="0,-20,0,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Image Source="{ThemeResource APPLICATION_EMPTY_IMG}" Height="96" Stretch="Uniform" Opacity="0.3"/>
                </StackPanel>

                <Grid x:Name="PasswordsByCharGrid" Visibility="{x:Bind MainViewModel.AppSettings.PasswordsOrderMode,Mode=OneWay,Converter={StaticResource Eql2Vis},ConverterParameter=0}">
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation From="-64,0,0" To="0,0,0" EasingMode="EaseOut" Duration="0:0:0.4"/>
                        <animations:OpacityAnimation To="1" Duration="0:0:0.8"/>
                    </animations:Implicit.ShowAnimations>
                    <animations:Implicit.HideAnimations>
                        <animations:OpacityAnimation To="0" Duration="0:0:0.2"/>
                    </animations:Implicit.HideAnimations>
                    <Grid.Resources>
                        <CollectionViewSource x:Name="PasswordsCollectionViewSource" Source="{x:Bind MainViewModel.PasswordsGroups,Mode=OneWay}" IsSourceGrouped="True" ItemsPath="Passwords"/>
                    </Grid.Resources>
                    <muxc:SemanticZoom>
                        <muxc:SemanticZoom.ZoomedInView>
                            <ListView x:Name="GroupedPasswordsList" Padding="2,0,8,8" SelectionMode="Single" IsSynchronizedWithCurrentItem="False" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                                      SelectedItem="{x:Bind MainViewModel.SelectedPassword,Mode=TwoWay}" ItemsSource="{x:Bind PasswordsCollectionViewSource.View,Mode=OneWay}">
                                <ListView.GroupStyle>
                                    <GroupStyle HidesIfEmpty="True" HeaderContainerStyle="{StaticResource ListViewHeaderItemStyle}">
                                        <GroupStyle.HeaderTemplate>
                                            <DataTemplate x:DataType="models:PasswordsGroupModel">
                                                <TextBlock Margin="4,4,0,14" Text="{x:Bind Key,Mode=OneWay}" FontWeight="Bold" FontSize="14"/>
                                            </DataTemplate>
                                        </GroupStyle.HeaderTemplate>
                                    </GroupStyle>
                                </ListView.GroupStyle>
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="models:PasswordModel">
                                        <Grid Height="68" HorizontalAlignment="Stretch">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" CornerRadius="4" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}" Height="50" Width="50" HorizontalAlignment="Left" VerticalAlignment="Center">
                                                <Border.Background>
                                                    <ImageBrush Stretch="UniformToFill" ImageSource="{x:Bind NormalLogoImage,Mode=OneWay}"/>
                                                </Border.Background>
                                            </Border>
                                            <StackPanel Grid.Column="1" Margin="12,0,4,0" Spacing="0" Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                <TextBlock FontSize="14" Text="{x:Bind Name,Mode=OneWay}" TextTrimming="CharacterEllipsis"/>
                                                <TextBlock FontSize="13.5" Opacity="0.7" Text="{x:Bind Account,Mode=OneWay}" TextTrimming="CharacterEllipsis"
                                                           Visibility="{x:Bind Account,Mode=OneWay,Converter={StaticResource Null2Vis}}"/>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </muxc:SemanticZoom.ZoomedInView>
                        <muxc:SemanticZoom.ZoomedOutView>
                            <GridView Padding="2,8,4,8" ItemsSource="{x:Bind PasswordsCollectionViewSource.View.CollectionGroups,Mode=OneWay}"
                                      SelectionMode="None" IsItemClickEnabled="True" HorizontalContentAlignment="Stretch" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <GridView.ItemTemplate>
                                    <DataTemplate x:DataType="ICollectionViewGroup">
                                        <TextBlock Text="{x:Bind Group.(models:PasswordsGroupModel.Key),Mode=OneWay}" FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" TextWrapping="Wrap"/>
                                    </DataTemplate>
                                </GridView.ItemTemplate>
                            </GridView>
                        </muxc:SemanticZoom.ZoomedOutView>
                    </muxc:SemanticZoom>
                </Grid>

                <Grid x:Name="PasswordsByTimeGrid" Visibility="{x:Bind MainViewModel.AppSettings.PasswordsOrderMode,Mode=OneWay,Converter={StaticResource Eql2Vis},ConverterParameter=1}">
                    <animations:Implicit.ShowAnimations>
                        <animations:TranslationAnimation From="64,0,0" To="0,0,0" EasingMode="EaseOut" Duration="0:0:0.4"/>
                        <animations:OpacityAnimation To="1" Duration="0:0:0.8"/>
                    </animations:Implicit.ShowAnimations>
                    <animations:Implicit.HideAnimations>
                        <animations:OpacityAnimation To="0" Duration="0:0:0.2"/>
                    </animations:Implicit.HideAnimations>

                    <ListView x:Name="TimeOrderPasswordsList" Padding="2,0,8,8" SelectionMode="Single" IsSynchronizedWithCurrentItem="False" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch"
                              SelectedItem="{x:Bind MainViewModel.SelectedPassword,Mode=TwoWay}" ItemsSource="{x:Bind MainViewModel.Passwords,Mode=OneWay}">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="models:PasswordModel">
                                <Grid Height="68" HorizontalAlignment="Stretch">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Border Grid.Column="0" CornerRadius="4" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}" Height="50" Width="50" HorizontalAlignment="Left" VerticalAlignment="Center">
                                        <Border.Background>
                                            <ImageBrush Stretch="UniformToFill" ImageSource="{x:Bind NormalLogoImage,Mode=OneWay}"/>
                                        </Border.Background>
                                    </Border>
                                    <StackPanel Grid.Column="1" Margin="12,0,4,0" Spacing="0" Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                        <TextBlock FontSize="14" Text="{x:Bind Name,Mode=OneWay}" TextTrimming="CharacterEllipsis"/>
                                        <TextBlock FontSize="13.5" Opacity="0.7" Text="{x:Bind Account,Mode=OneWay}" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Grid>
        </Grid>

        <!--密码详情页-->
        <Grid Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Image Visibility="{x:Bind MainViewModel.SelectedPassword,Mode=OneWay,Converter={StaticResource Null2Vis},ConverterParameter=-}" Source="{ThemeResource APPLICATION_BLANK_IMG}" Opacity="0.15" Width="400" Height="400" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center">
                <animations:Implicit.ShowAnimations>
                    <animations:CenterPointAnimation From="200,200,0" To="200,200,0"/>
                    <animations:OpacityAnimation To="0.15" Duration="0:0:0.4"/>
                    <animations:ScaleAnimation From="0.8" To="1" EasingMode="EaseOut" EasingType="Back" Duration="0:0:0.4"/>
                </animations:Implicit.ShowAnimations>
                <animations:Implicit.HideAnimations>
                    <animations:CenterPointAnimation From="200,200,0" To="200,200,0"/>
                    <animations:OpacityAnimation To="0.0" Duration="0:0:0.2"/>
                    <animations:ScaleAnimation From="1" To="0.8" EasingMode="EaseIn" EasingType="Back" Duration="0:0:0.2"/>
                </animations:Implicit.HideAnimations>
            </Image>

            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="Transparent" Visibility="{x:Bind MainViewModel.SelectedPassword,Mode=OneWay,Converter={StaticResource Null2Vis}}">
                <animations:Implicit.ShowAnimations>
                    <animations:OpacityAnimation To="1" Duration="0:0:0.4"/>
                    <animations:TranslationAnimation From="0,32,0" To="0,0,0" EasingMode="EaseInOut" EasingType="Default" Duration="0:0:0.4"/>
                </animations:Implicit.ShowAnimations>
                <animations:Implicit.HideAnimations>
                    <animations:OpacityAnimation To="0" Duration="0:0:0.4"/>
                    <animations:TranslationAnimation To="0,32,0" EasingMode="EaseInOut" EasingType="Default" Duration="0:0:0.4"/>
                </animations:Implicit.HideAnimations>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <ScrollViewer Grid.Row="0" Padding="20,0,20,0" Background="Transparent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" VerticalScrollMode="Auto" HorizontalScrollMode="Disabled">
                    <StackPanel Margin="0,20,0,20" Orientation="Vertical" HorizontalAlignment="Stretch" VerticalAlignment="Top">
                        <!--Logo-->
                        <Border CornerRadius="8" Margin="0,46,0,0" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}" Height="98" Width="98" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Border.Background>
                                <ImageBrush Stretch="UniformToFill" ImageSource="{x:Bind MainViewModel.SelectedPassword.LargeLogoImage,Mode=OneWay}"/>
                            </Border.Background>
                        </Border>

                        <!--Name-->
                        <TextBlock FontSize="18" FontWeight="Bold" Margin="20,8,20,0" Text="{x:Bind MainViewModel.SelectedPassword.Name,Mode=OneWay}" TextTrimming="CharacterEllipsis" HorizontalAlignment="Center"/>

                        <!--Category-->
                        <StackPanel Orientation="Horizontal" Opacity="0.7" Spacing="4" Margin="20,4,20,0" Visibility="{x:Bind MainViewModel.SelectedPassword.CategoryId,Mode=OneWay,Converter={StaticResource Int2Vis}}" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <FontIcon FontSize="13" Glyph="{x:Bind MainViewModel.SelectedPassword.CategoryId,Mode=OneWay,Converter={StaticResource Id2Category},ConverterParameter=Icon}" FontFamily="{ThemeResource SymbolThemeFontFamily}" VerticalAlignment="Center"/>
                            <TextBlock FontSize="13" Text="{x:Bind MainViewModel.SelectedPassword.CategoryId,Mode=OneWay,Converter={StaticResource Id2Category},ConverterParameter=Title}" VerticalAlignment="Center" TextTrimming="CharacterEllipsis"/>
                        </StackPanel>

                        <!--Account-->
                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,16,0,0" Padding="12" CornerRadius="8,8,0,0" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <FontIcon Grid.Column="0" Opacity="0.7" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE168;" FontSize="14"/>
                            <TextBlock x:Uid="PasswordsDetailAccountTextBlock" Grid.Column="1" FontSize="14" Margin="12,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <Button x:Name="AccountButton" x:Uid="PasswordsDetailAccountButton" Grid.Column="2" MinWidth="240" Height="34" Padding="8,0" HorizontalAlignment="Right" VerticalAlignment="Center" Click="OnClickCopyAccount">
                                <Grid HorizontalAlignment="Center" VerticalAlignment="Stretch">
                                    <TextBlock x:Name="AccountButtonTextBlock" Opacity="1" FontSize="14" FontWeight="Medium" FontFamily="Consolas" Text="{x:Bind MainViewModel.SelectedPassword.Account,Mode=OneWay}" 
                                               TextTrimming="CharacterEllipsis" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <TextBlock.OpacityTransition>
                                            <ScalarTransition Duration="0:0:0.2"/>
                                        </TextBlock.OpacityTransition>
                                    </TextBlock>
                                    <TextBlock x:Name="EmptyAccountButtonTextBlock" x:Uid="PasswordsDetailAccountEmptyTextBlock" FontSize="14" Opacity="0.6" TextTrimming="CharacterEllipsis"
                                               Visibility="{x:Bind MainViewModel.SelectedPassword.Account,Mode=OneWay,Converter={StaticResource Null2Vis},ConverterParameter=-}"/>
                                    <FontIcon x:Name="AccountCopiedFontIcon" Visibility="Collapsed" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF7EC;" FontSize="18" Foreground="ForestGreen" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <animations:Implicit.ShowAnimations>
                                            <animations:CenterPointAnimation From="10,10,0" To="10,10,0"/>
                                            <animations:OpacityAnimation From="0" To="1" Duration="0:0:0.4"/>
                                            <animations:ScaleAnimation From="0.7" To="1" EasingMode="EaseOut" EasingType="Default" Duration="0:0:0.8"/>
                                        </animations:Implicit.ShowAnimations>
                                    </FontIcon>
                                </Grid>
                            </Button>
                        </Grid>

                        <!--Password-->
                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="0,0,0,0" Padding="12" CornerRadius="0,0,8,8" BorderThickness="1,0,1,1" BorderBrush="{ThemeResource ControlElevationBorderBrush}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <FontIcon Grid.Column="0" Opacity="0.7" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xEDAD;" FontSize="14"/>
                            <TextBlock x:Uid="PasswordsDetailPasswordTextBlock" Grid.Column="1" FontSize="14" Margin="12,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <Button x:Name="PasswordButton" x:Uid="PasswordsDetailPasswordButton" Grid.Column="2" MinWidth="240" Height="34" Padding="8,0" HorizontalAlignment="Right" VerticalAlignment="Center" Click="OnClickCopyPassword">
                                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <Grid Visibility="{x:Bind MainViewModel.AppSettings.HidePassword,Mode=OneWay,Converter={StaticResource Bool2Vis},ConverterParameter=-}" HorizontalAlignment="Center" VerticalAlignment="Stretch">
                                        <TextBlock x:Name="PasswordButtonTextBlock" Opacity="1" FontSize="14" FontWeight="Medium" FontFamily="Consolas" Text="{x:Bind MainViewModel.SelectedPassword.Password,Mode=OneWay}" 
                                                   TextTrimming="CharacterEllipsis" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <TextBlock.OpacityTransition>
                                                <ScalarTransition Duration="0:0:0.2"/>
                                            </TextBlock.OpacityTransition>
                                        </TextBlock>
                                        <TextBlock x:Name="EmptyPasswordButtonTextBlock" x:Uid="PasswordsDetailPasswordEmptyTextBlock" FontSize="14" Opacity="0.6" TextTrimming="CharacterEllipsis"
                                                   Visibility="{x:Bind MainViewModel.SelectedPassword.Password,Mode=OneWay,Converter={StaticResource Null2Vis},ConverterParameter=-}"/>
                                        <FontIcon x:Name="PasswordCopiedFontIcon" Visibility="Collapsed" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF7EC;" FontSize="18" Foreground="ForestGreen" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <animations:Implicit.ShowAnimations>
                                                <animations:CenterPointAnimation From="10,10,0" To="10,10,0"/>
                                                <animations:OpacityAnimation From="0" To="1" Duration="0:0:0.4"/>
                                                <animations:ScaleAnimation From="0.7" To="1" EasingMode="EaseOut" EasingType="Default" Duration="0:0:0.8"/>
                                            </animations:Implicit.ShowAnimations>
                                        </FontIcon>
                                    </Grid>
                                    <StackPanel Visibility="{x:Bind MainViewModel.AppSettings.HidePassword,Mode=OneWay,Converter={StaticResource Bool2Vis}}" 
                                                Spacing="6" Opacity="0.7" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                        <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xF63C;" FontSize="8"/>
                                    </StackPanel>
                                </Grid>
                            </Button>
                        </Grid>

                        <!--Website-->
                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0" Visibility="{x:Bind MainViewModel.SelectedPassword.Website,Mode=OneWay,Converter={StaticResource Null2Vis}}">
                            <FontIcon Margin="12,0,0,0" Opacity="0.7" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE12B;" FontSize="14" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock x:Uid="PasswordsDetailWebsiteTextBlock" FontSize="14" Margin="12,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </StackPanel>
                        <HyperlinkButton Click="OnClickWebsite" Visibility="{x:Bind MainViewModel.SelectedPassword.Website,Mode=OneWay,Converter={StaticResource Null2Vis}}" Margin="0,4,0,0" HorizontalAlignment="Left">
                            <TextBlock FontSize="14" Text="{x:Bind MainViewModel.SelectedPassword.Website,Mode=OneWay}" TextTrimming="CharacterEllipsis"/>
                        </HyperlinkButton>

                        <!--Note-->
                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0" Visibility="{x:Bind MainViewModel.SelectedPassword.Note,Mode=OneWay,Converter={StaticResource Null2Vis}}">
                            <FontIcon Margin="12,0,0,0" Opacity="0.7" FontFamily="{ThemeResource SymbolThemeFontFamily}" Glyph="&#xE70B;" FontSize="14" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock x:Uid="PasswordsDetailNoteTextBlock" FontSize="14" Margin="12,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        </StackPanel>
                        <Grid Visibility="{x:Bind MainViewModel.SelectedPassword.Note,Mode=OneWay,Converter={StaticResource Null2Vis}}" HorizontalAlignment="Stretch" VerticalAlignment="Top" 
                              Margin="0,12,0,0" Padding="12,12,12,8" CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}">
                            <TextBlock Text="{x:Bind MainViewModel.SelectedPassword.Note,Mode=OneWay}" FontSize="14" LineHeight="20" FontFamily="{ThemeResource ZhuqueFont}" TextWrapping="Wrap" IsTextSelectionEnabled="True"/>
                        </Grid>

                        <!--Date-->
                        <TextBlock Margin="12,20,12,0" FontSize="13" Opacity="0.5" HorizontalAlignment="Left" VerticalAlignment="Top" TextTrimming="CharacterEllipsis">
                            <Run x:Uid="PasswordsDetailAddDateTextBlock"/>
                            <Run Text="{x:Bind MainViewModel.SelectedPassword.CreateDate,Mode=OneWay}"/>
                        </TextBlock>
                        <TextBlock Margin="12,0,12,0" Visibility="{x:Bind MainViewModel.SelectedPassword.EditDate,Mode=OneWay,Converter={StaticResource Null2Vis}}" FontSize="13" Opacity="0.5" HorizontalAlignment="Left" VerticalAlignment="Top" TextTrimming="CharacterEllipsis">
                            <Run x:Uid="PasswordsDetailEditDateTextBlock"/>
                            <Run Text="{x:Bind MainViewModel.SelectedPassword.EditDate,Mode=OneWay}"/>
                        </TextBlock>
                    </StackPanel>
                </ScrollViewer>
                <Grid Grid.Row="1" ColumnSpacing="8" Margin="20,0,20,20" Padding="8" CornerRadius="8" BorderThickness="1" BorderBrush="{ThemeResource ControlElevationBorderBrush}" Background="{ThemeResource APPLICATION_ITEM_BK}" HorizontalAlignment="Stretch" VerticalAlignment="Bottom">
                    <!--<Grid.Background>
                        <AcrylicBrush TintColor="Transparent" TintOpacity="0" TintLuminosityOpacity="0" FallbackColor="{ThemeResource SolidBackgroundFillColorBase}"/>
                    </Grid.Background>-->
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" Padding="0" Height="38" Width="38" Click="OnClickClose">
                        <muxc:AnimatedIcon Height="20">
                            <muxc:AnimatedIcon.Source>
                                <animatedvisuals:AnimatedBackVisualSource/>
                            </muxc:AnimatedIcon.Source>
                            <muxc:AnimatedIcon.FallbackIconSource>
                                <muxc:SymbolIconSource Symbol="Back"/>
                            </muxc:AnimatedIcon.FallbackIconSource>
                        </muxc:AnimatedIcon>
                    </Button>
                    <ToggleButton Grid.Column="2" IsThreeState="False" Padding="0" Height="38" Width="38" FontFamily="{ThemeResource SymbolThemeFontFamily}" Content="&#xED1A;" FontSize="16"
                                  IsChecked="{x:Bind MainViewModel.AppSettings.HidePassword,Mode=TwoWay}"/>
                    <Button Grid.Column="3" Padding="0" Height="38" Width="38" FontFamily="{ThemeResource SymbolThemeFontFamily}" Content="&#xE107;" FontSize="16">
                        <Button.Flyout>
                            <Flyout x:Name="DeletePasswordFlyout" Placement="Top">
                                <Grid Background="Transparent">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock x:Uid="PasswordsDetailDeleteTextBlock" FontSize="14" FontWeight="Bold"/>
                                    <TextBlock Grid.Row="1" Margin="0,4,0,0" TextWrapping="Wrap" MaxWidth="200" Opacity="0.7" FontSize="13">
                                        <Run x:Uid="PasswordsDetailDeleteTextBlockRun1"/>
                                        <Run Text="{x:Bind MainViewModel.SelectedPassword.Name,Mode=OneWay}"/>
                                        <Run x:Uid="PasswordsDetailDeleteTextBlockRun2"/>
                                    </TextBlock>
                                    <Grid Grid.Row="2" Margin="0,12,0,0">
                                        <Border Background="Firebrick" CornerRadius="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                                        <Button x:Uid="PasswordsDetailDeleteConfirmButton" FontSize="13" Foreground="White" BorderThickness="0" Background="Transparent" CornerRadius="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="OnClickDelete"/>
                                    </Grid>
                                </Grid>
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                    <Button Grid.Column="4" Padding="0" Height="38" Width="38" FontFamily="{ThemeResource SymbolThemeFontFamily}" Content="&#xE104;" FontSize="16" Click="OnClickEdit"/>
                    <Button Grid.Column="5" Padding="0" Height="38" Width="38" Click="OnClickFavorite">
                        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                            <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Height="22" Width="22" Glyph="&#xE00B;" FontSize="17" Visibility="{x:Bind MainViewModel.SelectedPassword.Favorite,Mode=OneWay,Converter={StaticResource Bool2Vis}}">
                                <animations:Implicit.ShowAnimations>
                                    <animations:OpacityAnimation To="1.0" Duration="0:0:1"/>
                                    <animations:ScaleAnimation From="0" To="1" EasingMode="EaseInOut" EasingType="Bounce" Duration="0:0:0.4"/>
                                    <animations:CenterPointAnimation From="11,11,0" To="11,11,0"/>
                                </animations:Implicit.ShowAnimations>
                                <animations:Implicit.HideAnimations>
                                    <animations:OpacityAnimation To="0.0" Duration="0:0:0.6"/>
                                    <animations:ScaleAnimation To="0" Duration="0:0:0.4" EasingType="Linear"/>
                                    <animations:CenterPointAnimation From="11,11,0" To="11,11,0"/>
                                </animations:Implicit.HideAnimations>
                            </FontIcon>
                            <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}" Height="22" Width="22" Glyph="&#xE006;" FontSize="17"/>
                        </Grid>
                    </Button>
                </Grid>
            </Grid>

            <InfoBar x:Name="RememberBackupInfoBar" x:Uid="PasswordsRememberBackupInfoBar" HorizontalAlignment="Stretch" VerticalAlignment="Top" Margin="20,40,20,8"
                     IsOpen="False" Severity="Warning" Message="">
                <InfoBar.ActionButton>
                    <HyperlinkButton x:Uid="PasswordsRememberBackupLearnMoreButton" Click="OnClickGetInfoAboutBackup"/>
                </InfoBar.ActionButton>
            </InfoBar>
        </Grid>
    </Grid>
</Page>
